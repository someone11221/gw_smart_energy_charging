from __future__ import annotations\nimport voluptuous as vol\nfrom typing import Any\nfrom homeassistant import config_entries\nfrom homeassistant.const import CONF_NAME\nfrom .const import (\n    DOMAIN,\n    CONF_FORECAST_SENSOR,\n    CONF_PRICE_SENSOR,\n    CONF_GOODWE_SWITCH,\n    CONF_PV_POWER_SENSOR,\n    CONF_SOC_SENSOR,\n    CONF_BATTERY_CAPACITY,\n    CONF_MAX_CHARGE_POWER,\n    CONF_CHARGE_EFFICIENCY,\n    CONF_MIN_RESERVE,\n    CONF_ENABLE_AUTOMATION,\n    CONF_SWITCH_ON_MEANS_CHARGE,\n)\n\nclass GWSmartConfigFlow(config_entries.ConfigFlow, domain=DOMAIN):\n    VERSION = 1\n    CONNECTION_CLASS = config_entries.CONN_CLASS_LOCAL_POLL\n\n    async def async_step_user(self, user_input: dict[str, Any] | None = None):\n        errors = {}\n        if user_input is not None:\n            return self.async_create_entry(title=user_input.get(CONF_NAME) or "GW Smart Charging", data=user_input)\n\n        data_schema = vol.Schema({\n            vol.Required(CONF_NAME, default="GW Smart Charging"): str,\n            vol.Required(CONF_FORECAST_SENSOR, default=""): str,\n            vol.Required(CONF_PRICE_SENSOR, default=""): str,\n            vol.Optional(CONF_PV_POWER_SENSOR, default=""): str,\n            vol.Optional(CONF_GOODWE_SWITCH, default="switch.nabijeni_ze_site"): str,\n            vol.Optional(CONF_SOC_SENSOR, default="sensor.battery_state_of_charge"): str,\n            vol.Optional(CONF_BATTERY_CAPACITY, default=17): vol.Coerce(float),\n            vol.Optional(CONF_MAX_CHARGE_POWER, default=3.7): vol.Coerce(float),\n            vol.Optional(CONF_CHARGE_EFFICIENCY, default=0.95): vol.Coerce(float),\n            vol.Optional(CONF_MIN_RESERVE, default=10): vol.Coerce(float),\n            vol.Optional(CONF_ENABLE_AUTOMATION, default=True): bool,\n            vol.Optional(CONF_SWITCH_ON_MEANS_CHARGE, default=True): bool,\n        })\n\n        return self.async_show_form(step_id="user", data_schema=data_schema, errors=errors)\n